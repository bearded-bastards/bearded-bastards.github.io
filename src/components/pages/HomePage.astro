---
import "../../styles/home_page.css";
import Image from "astro/components/Image.astro";
import NavLayout from "../layouts/NavLayout.astro";
import translate from "../../utils/content/translation";
import laurel_icon from "../../assets/icons/laurels.svg";
import certifications from "../../content/certifications";
import type { Languages } from "../../config/language_config";
import embed_bbgs_logo from "../../assets/logos/embed_bbgs.webp";
import contact_information from "../../content/contact_information";
import owner_signature from "../../assets/images/owner_signature.svg";
import owner_portrait from "../../assets/images/ashley_deployment.webp";
import { contact_link, services_link } from "../../config/naviagtion_config";
import services, { labor_cost_per_hour_usd, minimum_service_hours } from "../../content/services";

interface Props {
    language: Languages;
};

const showcase_images: Record<string, {
    default: ImageMetadata
}> = import.meta.glob<{
    default: ImageMetadata
}>(
    "../../assets/showcase/*.{png,jpg,jpeg,webp,svg}",
    {
        eager: true
    }
);
---

<NavLayout class="home-body" language={Astro.props.language}>
    <home-page-canvas>
        <Image
            src={embed_bbgs_logo}
            alt="Owner-Portrait"
            loading="eager"
            class="backdrop-logo"
        />
    </home-page-canvas>

    <!-- * Hero Section * -->
    <section id="hero-section">
        <div class="centered-title-container">
            <h1 class="text-xl text-lighter">
                {translate(Astro.props.language, "home_page", "hero_heading")}
            </h1>

            <h2 class="text-lg weight-normal">
                {translate(Astro.props.language, "home_page", "hero_subheading")}
            </h2>

            <div class="bbgs-divider" />
        </div>

        <div class="hero-btn-container">
            <a href={contact_link.href} class="bbgs-btn">
                {translate(Astro.props.language, "home_page", "hero_contact_cta")}
            </a>

            <a href={services_link.href} class="bbgs-btn">
                {translate(Astro.props.language, "home_page", "hero_learn_cta")}
            </a>
        </div>
    </section>

    <!-- * About Section * -->
    <section id="about-section">
        <Image
            src={owner_portrait}
            alt="Owner-Portrait"
            loading="eager"
            class="about-owner-portrait"
        />

        <div class="about-content-container">
            <div class="bbgs-divider" />

            <div class="title-container">
                <h1 class="text-xl text-lighter">
                    {translate(Astro.props.language, "home_page", "about_heading")}
                </h1>

                <h2 class="text-lg weight-normal">
                    {translate(Astro.props.language, "home_page", "about_subheading")}
                </h2>
            </div>

            <p class="about-paragraph">
                {translate(Astro.props.language, "home_page", "about_paragraph")}
            </p>

            <Image
                src={owner_signature}
                alt="Owner-Signature"
                loading="lazy"
            />
        </div>
    </section>

    <!-- * Certifications Section * -->
    <section id="certifications-section">
        <div class="centered-title-container">
            <h1 class="text-xl text-lighter">
                {translate(Astro.props.language, "home_page", "certifications_heading")}
            </h1>

            <h2 class="text-lg weight-normal">
                {translate(Astro.props.language, "home_page", "certifications_subheading")}
            </h2>

            <div class="bbgs-divider" />
        </div>

        <div class="certificates-grid">
            {certifications.map((certificate, index) => (
                <div class="certificate-container">
                    <Image
                        src={laurel_icon}
                        alt={`Certificate-${index}`}
                        loading="lazy"
                        class="certificate-icon"
                    />

                    <div>
                        <div class="text-lg text-lighter">
                            {translate(Astro.props.language, "certifications", certificate.title_translation_key)}
                        </div>

                        <div class="text-md text-light">
                            {translate(Astro.props.language, "certifications", certificate.issuer_translation_key)}
                        </div>
                    </div>
                </div>
            ))}
        </div>
    </section>

    <!-- * Services Section * -->
    <section id="services-section">
        <div class="centered-title-container">
            <h1 class="text-xl text-lighter">
                {translate(Astro.props.language, "home_page", "services_heading")}
            </h1>

            <h2 class="text-lg weight-normal">
                {translate(Astro.props.language, "home_page", "services_subheading")}
            </h2>

            <div class="bbgs-divider" />
        </div>

        <div class="service-card-container">
            {services.map((service) => (
                <div class="service-card">
                    <div
                        class="service-card-preview"
                        style={`--service-card-preview-image: url('${service.preview_image.src}');`}
                    />

                    <div class="service-card-content-container">
                        <div class="service-card-title-container">
                            <h3 class="text-lighter text-md">
                                {translate(Astro.props.language, "services", service.name_translation_key)}
                            </h3>

                            <span class="text-light">
                                {service.cost === 0.0 ? translate(Astro.props.language, "services", "cost_free") : `$${service.cost.toFixed(2)}`}
                            </span>
                        </div>

                        <div class="service-card-divider" />

                        <p class="service-card-paragraph">
                            {translate(Astro.props.language, "services", service.description_translation_key)}
                        </p>
                    </div>
                </div>
            ))}
        </div>

        <p class="text-lighter text-md" style="margin-top: 2rem;">
            {translate(Astro.props.language, "services", "labor_notice_prefix")}
            {labor_cost_per_hour_usd.toFixed(2)}
            {translate(Astro.props.language, "services", "labor_notice_center")}
            {minimum_service_hours.toFixed(1)}
            {translate(Astro.props.language, "services", "labor_notice_suffix")}
        </p>
    </section>

    <!-- * Contact Section * -->
    <section id="contact-section">
        <div class="title-container contact-title-container">
            <h1 class="text-xl text-lighter">
                {translate(Astro.props.language, "home_page", "contact_heading")}
            </h1>

            <h2 class="text-lg weight-normal">
                {translate(Astro.props.language, "home_page", "contact_subheading")}
            </h2>

            <div class="bbgs-divider" />
        </div>

        <div class="contact-information-container">
            {contact_information.map((contact, index) => (
                <a href={contact.href} class="contact-information-pane">
                    <Image
                        src={contact.icon}
                        alt={`Certificate-${index}`}
                        loading="lazy"
                        class="contact-information-icon"
                    />

                    <span>
                        {contact.information}
                    </span>
                </a>
            ))}
        </div>
    </section>

    <!-- * Work Showcase Carousel * -->
    <div class="showcase-carousel">
        <div class="showcase-scroll-track">
            {Array.from({ length: 2 }).map(() => (
                <div class="showcase-group">
                    {Object.entries(showcase_images).map(([path, data]) => (
                        <Image
                            src={data.default}
                            alt={`Showcase-${path}`}
                            loading="lazy"
                            class="showcase-image"
                        />
                    ))}
                </div>
            ))}
        </div>
    </div>

    <script src="../../scripts/home_page.ts" />
</NavLayout>